<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ICEQ - –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä —Ç–µ—Å—Ç–æ–≤</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å PDF -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.10.377/pdf.min.js"></script>
    <!-- –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å DOCX -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mammoth/1.4.21/mammoth.browser.min.js"></script>
</head>
<body>
    <div class="theme-toggle">
        <input type="checkbox" id="theme-switch">
        <label for="theme-switch" class="toggle-label"></label>
    </div>

    <div class="container">
        <!-- –ì–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω -->
        <div id="main-screen" class="screen active">
            <div class="header">
                <div class="logo">ICEQ</div>
                <div class="premium-btn">–ü—Ä–µ–º–∏—É–º</div>
            </div>

            <div class="main-actions">
                <div class="action-card" id="create-test-btn">
                    <div class="card-icon">+</div>
                    <div class="card-title">–°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç</div>
                </div>
                <div class="action-card" id="load-test-btn">
                    <div class="card-icon">üìÅ</div>
                    <div class="card-title">–ü—Ä–æ–π—Ç–∏ –≥–æ—Ç–æ–≤—ã–π —Ç–µ—Å—Ç</div>
                </div>
            </div>

            <div class="footer">
                <a href="https://github.com/phantom2059/ICEQ" class="about-link" target="_blank" rel="noopener noreferrer">–û –ø—Ä–æ–µ–∫—Ç–µ</a>
            </div>
        </div>

        <!-- –≠–∫—Ä–∞–Ω —Å–æ–∑–¥–∞–Ω–∏—è —Ç–µ—Å—Ç–∞ -->
        <div id="create-test-screen" class="screen">
            <div class="breadcrumbs">
                <a href="#" id="back-to-main">–ì–ª–∞–≤–Ω–∞—è</a> > –°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç
            </div>

            <div class="card">
                <h1>–°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ—Å—Ç–∞</h1>

                <div class="tab-container">
                    <div class="input-tabs">
                        <button class="tab-btn active" data-tab="text">–¢–µ–∫—Å—Ç</button>
                        <button class="tab-btn" data-tab="file">–§–∞–π–ª</button>
                    </div>

                    <div id="text-input-tab" class="tab-content active">
                        <textarea id="text-content" rows="8" placeholder="–í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –≤–æ–ø—Ä–æ—Å–æ–≤..."></textarea>
                    </div>

                    <div id="file-input-tab" class="tab-content">
                        <div id="drop-area" class="upload-area">
                            <p>–ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ —Ñ–∞–π–ª —Å—é–¥–∞ –∏–ª–∏</p>
                            <input type="file" id="file-upload" accept=".txt,.doc,.docx,.pdf">
                            <label for="file-upload" class="custom-file-upload">–í—ã–±–µ—Ä–∏—Ç–µ —Ñ–∞–π–ª</label>
                            <p id="file-name" class="file-name"></p>
                        </div>
                    </div>
                </div>

                <div class="question-count">
                    <label for="question-number">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤–æ–ø—Ä–æ—Å–æ–≤:</label>
                    <input type="number" id="question-number" min="5" max="50" value="10">
                    <div class="slider-container">
                        <input type="range" min="5" max="50" value="10" class="slider" id="question-slider">
                    </div>
                </div>

                <div class="bottom-panel">
                    <button id="generate-btn" class="btn primary-btn">–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Ç–µ—Å—Ç</button>
                </div>
            </div>
        </div>

        <!-- –≠–∫—Ä–∞–Ω –∑–∞–≥—Ä—É–∑–∫–∏ –≥–æ—Ç–æ–≤–æ–≥–æ —Ç–µ—Å—Ç–∞ -->
        <div id="load-test-screen" class="screen">
            <div class="breadcrumbs">
                <a href="#" id="back-to-main-from-load">–ì–ª–∞–≤–Ω–∞—è</a> > –ü—Ä–æ–π—Ç–∏ —Ç–µ—Å—Ç
            </div>

            <div class="card">
                <h1>–ó–∞–≥—Ä—É–∑–∏—Ç–µ –≥–æ—Ç–æ–≤—ã–π —Ç–µ—Å—Ç</h1>

                <div id="ready-test-drop-area" class="upload-area">
                    <p>–ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ —Ñ–∞–π–ª —Ç–µ—Å—Ç–∞ (.json) —Å—é–¥–∞ –∏–ª–∏</p>
                    <input type="file" id="ready-test-upload" accept=".json">
                    <label for="ready-test-upload" class="custom-file-upload">–ó–∞–≥—Ä—É–∑–∏—Ç—å –≥–æ—Ç–æ–≤—ã–π —Ç–µ—Å—Ç</label>
                    <p id="ready-test-name" class="file-name"></p>
                </div>

                <div class="show-explanations-toggle">
                    <input type="checkbox" id="show-explanations" checked>
                    <label for="show-explanations">–ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –æ–±—ä—è—Å–Ω–µ–Ω–∏—è –ø–æ—Å–ª–µ –æ—Ç–≤–µ—Ç–æ–≤</label>
                </div>

                <div class="bottom-panel">
                    <button id="back-btn" class="btn secondary-btn">–ù–∞–∑–∞–¥</button>
                    <button id="start-loaded-test-btn" class="btn primary-btn" disabled>–ù–∞—á–∞—Ç—å —Ç–µ—Å—Ç</button>
                </div>
            </div>
        </div>

        <!-- –≠–∫—Ä–∞–Ω –∑–∞–≥—Ä—É–∑–∫–∏/–≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ -->
        <div id="loading-screen" class="screen">
            <div class="card">
                <h2>–ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ—Å—Ç–∞...</h2>
                <div class="loader-wrapper">
                    <div class="loader"></div>
                    <div class="loader-progress">0%</div>
                </div>
                <div id="loading-log" class="loading-log"></div>
            </div>
        </div>

        <!-- –≠–∫—Ä–∞–Ω –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Ç–µ—Å—Ç–∞ -->
        <div id="test-preview-screen" class="screen">
            <div class="breadcrumbs">
                <a href="#" id="back-to-create-test">–°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç</a> > –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä
            </div>

            <div class="card">
                <h2>–¢–µ—Å—Ç –≥–æ—Ç–æ–≤!</h2>
                <p>–°–æ–∑–¥–∞–Ω —Ç–µ—Å—Ç –∏–∑ <span id="preview-question-count">10</span> –≤–æ–ø—Ä–æ—Å–æ–≤</p>

                <div class="preview-container">
                    <div id="question-preview" class="question-preview">
                        <h3>–ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä –≤–æ–ø—Ä–æ—Å–∞ <span id="preview-number">1</span></h3>
                        <p id="preview-question-text" class="preview-question-text"></p>
                        <div id="preview-answers" class="preview-answers"></div>
                    </div>

                    <div class="questions-list">
                        <h3>–°–ø–∏—Å–æ–∫ –≤–æ–ø—Ä–æ—Å–æ–≤</h3>
                        <div id="questions-accordion" class="questions-accordion"></div>
                    </div>
                </div>

                <div class="bottom-panel">
                    <button id="download-test-btn" class="btn secondary-btn">
                        <svg class="btn-icon" viewBox="0 0 24 24" width="16" height="16">
                            <path fill="currentColor" d="M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z"/>
                        </svg>
                        –°–∫–∞—á–∞—Ç—å —Ç–µ—Å—Ç
                    </button>
                    <button id="start-test-btn" class="btn primary-btn">
                        <svg class="btn-icon" viewBox="0 0 24 24" width="16" height="16">
                            <path fill="currentColor" d="M8 5v14l11-7-11-7z"/>
                        </svg>
                        –ü—Ä–æ–π—Ç–∏ –æ–Ω–ª–∞–π–Ω
                    </button>
                </div>
            </div>
        </div>

        <!-- –≠–∫—Ä–∞–Ω –≤–æ–ø—Ä–æ—Å–∞ -->
        <div id="question-screen" class="screen">
            <div class="card question-card">
                <div class="progress-bar">
                    <div id="progress-fill" class="progress-fill"></div>
                </div>
                <h3 id="question-count">–í–æ–ø—Ä–æ—Å 1 –∏–∑ 10</h3>
                <p id="question-text" class="question-text"></p>

                <div id="answers-container" class="answers-container"></div>

                <div class="bottom-panel">
                    <button id="skip-btn" class="btn secondary-btn">–ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å</button>
                    <button id="answer-btn" class="btn primary-btn" disabled>–û—Ç–≤–µ—Ç–∏—Ç—å</button>
                </div>
            </div>
        </div>

        <!-- –≠–∫—Ä–∞–Ω –æ–±—ä—è—Å–Ω–µ–Ω–∏—è -->
        <div id="explanation-screen" class="screen">
            <div class="card explanation-card">
                <h2>–†–µ–∑—É–ª—å—Ç–∞—Ç</h2>
                <p id="user-answer" class="user-answer"></p>
                <p id="correct-answer" class="correct-answer"></p>
                <div class="explanation-text">
                    <p id="explanation-text"></p>
                </div>
                <div class="bottom-panel">
                    <button id="next-btn" class="btn primary-btn">–î–∞–ª–µ–µ</button>
                </div>
            </div>
        </div>

        <!-- –≠–∫—Ä–∞–Ω —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ -->
        <div id="results-screen" class="screen">
            <div class="card results-card">
                <h2>–†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∞</h2>
                <div class="score">
                    <span id="score">0/10</span>
                </div>
                <div class="result-actions">
                    <button id="review-answers-btn" class="btn secondary-btn">–ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å –æ—Ç–≤–µ—Ç—ã</button>
                    <button id="export-results-btn" class="btn secondary-btn">–≠–∫—Å–ø–æ—Ä—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤</button>
                    <button id="restart-btn" class="btn primary-btn">–ù–∞—á–∞—Ç—å –∑–∞–Ω–æ–≤–æ</button>
                </div>
            </div>
        </div>

        <!-- –≠–∫—Ä–∞–Ω –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –æ—Ç–≤–µ—Ç–æ–≤ -->
        <div id="review-answers-screen" class="screen">
            <div class="card review-card">
                <h2>–û–±–∑–æ—Ä –≤–æ–ø—Ä–æ—Å–æ–≤</h2>

                <div class="review-filter">
                    <div class="filter-buttons">
                        <button class="filter-btn active" data-filter="all">–í—Å–µ</button>
                        <button class="filter-btn" data-filter="incorrect">–¢–æ–ª—å–∫–æ –æ—à–∏–±–∫–∏</button>
                        <button class="filter-btn" data-filter="skipped">–ü—Ä–æ–ø—É—â–µ–Ω–Ω—ã–µ</button>
                    </div>
                    <div class="search-container">
                        <input type="text" id="search-questions" placeholder="–ü–æ–∏—Å–∫...">
                    </div>
                </div>

                <div id="review-container" class="review-container"></div>

                <div class="bottom-panel">
                    <button id="back-to-results-btn" class="btn primary-btn">–ù–∞–∑–∞–¥ –∫ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º</button>
                </div>
            </div>
        </div>
    </div>

    <script src="{{ url_for('static', filename='js/script.js') }}"></script>
</body>
</html>
