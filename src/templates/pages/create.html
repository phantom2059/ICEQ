{% extends "base.html" %}

{% block title %}–°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç - ICEQ{% endblock %}

{% block page_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/pages/create.css') }}">
{% endblock %}

{% block content %}
<div class="create-container">
    <!-- –•–ª–µ–±–Ω—ã–µ –∫—Ä–æ—à–∫–∏ -->
    <div class="breadcrumbs">
        <a href="/" class="breadcrumb-link">–ì–ª–∞–≤–Ω–∞—è</a>
        <span class="breadcrumb-separator">‚Üí</span>
        <span class="breadcrumb-current">–°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç</span>
    </div>

    <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ -->
    <div class="page-header">
        <h1>‚ú® –°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ—Å—Ç–∞</h1>
        <p class="page-description">–ó–∞–≥—Ä—É–∑–∏—Ç–µ —Ç–µ–∫—Å—Ç –∏–ª–∏ —Ñ–∞–π–ª, –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏ –ø–æ–ª—É—á–∏—Ç–µ –≥–æ—Ç–æ–≤—ã–π —Ç–µ—Å—Ç —Å –≤–æ–ø—Ä–æ—Å–∞–º–∏</p>
    </div>

    <!-- –û—Å–Ω–æ–≤–Ω–∞—è —Ñ–æ—Ä–º–∞ -->
    <div class="card main-form">
        <!-- –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª–∏ –≤–≤–æ–¥–∞ -->
        <div class="input-tabs">
            <button class="tab-btn active" data-tab="text">
                <span class="tab-icon">üìù</span>
                <span>–¢–µ–∫—Å—Ç</span>
            </button>
            <button class="tab-btn" data-tab="file">
                <span class="tab-icon">üìÅ</span>
                <span>–§–∞–π–ª</span>
            </button>
        </div>

        <!-- –í–∫–ª–∞–¥–∫–∞ –≤–≤–æ–¥–∞ —Ç–µ–∫—Å—Ç–∞ -->
        <div id="text-input-tab" class="tab-content active">
            <div class="input-group">
                <label for="text-content">–í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –≤–æ–ø—Ä–æ—Å–æ–≤:</label>
                <textarea 
                    id="text-content" 
                    rows="8" 
                    placeholder="–í–≤–µ–¥–∏—Ç–µ –∏–ª–∏ –≤—Å—Ç–∞–≤—å—Ç–µ —Ç–µ–∫—Å—Ç –∑–¥–µ—Å—å..."
                    maxlength="10000"
                ></textarea>
                <div class="input-footer">
                    <div id="char-counter" class="char-counter">
                        <span class="current">0</span>/<span class="max">10000</span> —Å–∏–º–≤–æ–ª–æ–≤
                    </div>
                    <div class="input-hints">
                        üí° –õ–∏–º–∏—Ç —Å–∏–º–≤–æ–ª–æ–≤: 10 000 (–±–∞–∑–æ–≤—ã–π –ø–ª–∞–Ω)
                    </div>
                </div>
            </div>
        </div>

        <!-- –í–∫–ª–∞–¥–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–∞ -->
        <div id="file-input-tab" class="tab-content">
            <div class="input-group">
                <label>–ó–∞–≥—Ä—É–∑–∏—Ç–µ —Ñ–∞–π–ª:</label>
                <div id="drop-area" class="upload-area">
                    <div class="upload-icon">üìé</div>
                    <h3>–ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ —Ñ–∞–π–ª —Å—é–¥–∞</h3>
                    <p>–∏–ª–∏</p>
                    <input type="file" id="file-upload" accept=".txt,.doc,.docx,.pdf" hidden>
                    <button type="button" class="btn secondary-btn" onclick="document.getElementById('file-upload').click()">
                        –í—ã–±–µ—Ä–∏—Ç–µ —Ñ–∞–π–ª
                    </button>
                    <div class="file-info" id="file-info" style="display: none;">
                        <div class="file-preview">
                            <span class="file-icon">üìÑ</span>
                            <div class="file-details">
                                <div class="file-name" id="file-name"></div>
                                <div class="file-size" id="file-size"></div>
                            </div>
                            <button class="file-remove" id="file-remove">‚úï</button>
                        </div>
                    </div>
                </div>
                <div class="upload-hints">
                    <p><strong>–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã:</strong> TXT, DOC, DOCX, PDF</p>
                    <p>üí° –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä: 50 –ö–ë (–±–∞–∑–æ–≤—ã–π –ø–ª–∞–Ω)</p>
                </div>
            </div>
        </div>

        <!-- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Ç–µ—Å—Ç–∞ -->
        <div class="test-settings">
            <div class="setting-group">
                <label for="question-number">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤–æ–ø—Ä–æ—Å–æ–≤:</label>
                <div class="quantity-control">
                    <button type="button" class="quantity-btn" id="decrease-questions">‚àí</button>
                    <input type="number" id="question-number" min="5" max="50" value="10" readonly>
                    <button type="button" class="quantity-btn" id="increase-questions">+</button>
                </div>
                <div class="slider-container">
                    <input type="range" min="5" max="50" value="10" class="slider" id="question-slider">
                    <div class="slider-labels">
                        <span>5</span>
                        <span>50</span>
                    </div>
                </div>
            </div>

            <div class="setting-group">
                <label>–ú–æ–¥–µ–ª—å –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏:</label>
                <div class="model-selection">
                    <div class="model-option" data-model="iceq">
                        <div class="model-header">
                            <div class="model-icon">üè†</div>
                            <div class="model-info">
                                <h4>ICEQ (–Ω–∞—à–∞ –¥–æ–æ–±—É—á–µ–Ω–Ω–∞—è –º–æ–¥–µ–ª—å)</h4>
                                <p>–°–ø–µ—Ü–∏–∞–ª—å–Ω–æ –æ–±—É—á–µ–Ω–Ω–∞—è –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –≤–æ–ø—Ä–æ—Å–æ–≤</p>
                            </div>
                            <div class="model-status recommended">–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è</div>
                        </div>
                    </div>
                    
                    <div class="model-option" data-model="deepseek">
                        <div class="model-header">
                            <div class="model-icon">üß†</div>
                            <div class="model-info">
                                <h4>DeepSeek</h4>
                                <p>–û–±–ª–∞—á–Ω–∞—è –º–æ–¥–µ–ª—å –≤—ã—Å–æ–∫–æ–≥–æ –∫–∞—á–µ—Å—Ç–≤–∞</p>
                            </div>
                            <div class="model-status alternative">–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞</div>
                        </div>
                    </div>
                    
                    <div class="model-option" data-model="qwen">
                        <div class="model-header">
                            <div class="model-icon">‚ö°</div>
                            <div class="model-info">
                                <h4>Qwen</h4>
                                <p>–ë—ã—Å—Ç—Ä–∞—è –æ–±–ª–∞—á–Ω–∞—è –º–æ–¥–µ–ª—å</p>
                            </div>
                            <div class="model-status alternative">–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–∞—è –æ—Ü–µ–Ω–∫–∞ -->
        <div class="estimation-panel" id="estimation-panel" style="display: none;">
            <div class="estimation-content">
                <div class="estimation-icon">‚è±Ô∏è</div>
                <div class="estimation-info">
                    <h4>–ü—Ä–∏–º–µ—Ä–Ω–æ–µ –≤—Ä–µ–º—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏:</h4>
                    <div class="time-estimate" id="time-estimate">~ 2-3 –º–∏–Ω—É—Ç—ã</div>
                </div>
            </div>
        </div>

        <!-- –ö–Ω–æ–ø–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π -->
        <div class="form-actions">
            <button type="button" class="btn secondary-btn" id="back-btn">
                ‚Üê –ù–∞–∑–∞–¥
            </button>
            <button type="button" class="btn primary-btn" id="generate-btn" disabled>
                <span class="btn-icon">‚ú®</span>
                <span class="btn-text">–°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç</span>
            </button>
        </div>
    </div>

    <!-- –≠–∫—Ä–∞–Ω –∑–∞–≥—Ä—É–∑–∫–∏ -->
    <div class="loading-overlay" id="loading-overlay" style="display: none;">
        <div class="loading-content">
            <div class="loading-spinner"></div>
            <h3 id="loading-title">–ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ—Å—Ç–∞...</h3>
            <div class="loading-progress">
                <div class="progress-bar">
                    <div class="progress-fill" id="progress-fill"></div>
                </div>
                <div class="progress-text" id="progress-text">0%</div>
            </div>
            
            <div class="loading-stages">
                <div class="stage-item" data-stage="analyze">
                    <div class="stage-icon">üìñ</div>
                    <div class="stage-text">–ê–Ω–∞–ª–∏–∑ —Ç–µ–∫—Å—Ç–∞</div>
                    <div class="stage-status"></div>
                </div>
                <div class="stage-item" data-stage="concepts">
                    <div class="stage-icon">üß©</div>
                    <div class="stage-text">–ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –∫–æ–Ω—Ü–µ–ø—Ü–∏–π</div>
                    <div class="stage-status"></div>
                </div>
                <div class="stage-item" data-stage="questions">
                    <div class="stage-icon">‚ùì</div>
                    <div class="stage-text">–§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–æ–ø—Ä–æ—Å–æ–≤</div>
                    <div class="stage-status"></div>
                </div>
                <div class="stage-item" data-stage="answers">
                    <div class="stage-icon">üí°</div>
                    <div class="stage-text">–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–æ–≤</div>
                    <div class="stage-status"></div>
                </div>
                <div class="stage-item" data-stage="quality">
                    <div class="stage-icon">‚úÖ</div>
                    <div class="stage-text">–ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞</div>
                    <div class="stage-status"></div>
                </div>
            </div>

            <div id="loading-log" class="loading-log"></div>
        </div>
    </div>



</div>
{% endblock %}

{% block page_js %}
<script src="{{ url_for('static', filename='js/pages/create.js') }}"></script>
{% endblock %} 